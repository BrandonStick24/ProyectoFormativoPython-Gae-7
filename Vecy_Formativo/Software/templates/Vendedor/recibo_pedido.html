[file name]: recibo_pedido.html
[file content begin]
<!-- Templates/Vendedor/recibo_pedido.html -->
{% extends 'Layout_V.html' %}
{% load static %}

{% block title %}Recibo Pedido #{{ pedido.id }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'vendedor/css/crud_V.css' %}">
<style>
/* ESTILOS MEJORADOS PARA RECIBO */
:root {
    --primary-gradient: linear-gradient(135deg, #5F85DB, #90B8F8);
    --success-gradient: linear-gradient(135deg, #10B981, #059669);
    --warning-gradient: linear-gradient(135deg, #F59E0B, #D97706);
    --danger-gradient: linear-gradient(135deg, #EF4444, #DC2626);
    --purple-gradient: linear-gradient(135deg, #8B5CF6, #7C3AED);
    --dark-gradient: linear-gradient(135deg, #26282B, #353941);
}

.recibo-contenedor-principal {
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    margin-bottom: 2rem;
    position: relative;
}

/* Cabecera sticky con botón */
.recibo-cabecera-sticky {
    background: var(--dark-gradient);
    padding: 1.5rem 2rem;
    position: sticky;
    top: 0;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}

.cabecera-izquierda {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.btn-volver-cabecera {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.7rem 1.5rem;
    background: var(--purple-gradient);
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 0.95rem;
    text-decoration: none;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    white-space: nowrap;
}

.btn-volver-cabecera:hover {
    background: linear-gradient(135deg, #7C3AED, #6D28D9);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
    color: white;
}

.recibo-titulo-principal h1 {
    color: white;
    margin-bottom: 0.25rem;
    font-weight: 700;
    font-size: 1.5rem;
}

.recibo-titulo-principal p {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 0;
    font-size: 0.9rem;
}

.cabecera-derecha {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.recibo-id-badge-grande {
    background: var(--primary-gradient);
    color: white;
    padding: 0.5rem 1.5rem;
    border-radius: 50px;
    font-size: 1.3rem;
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(95, 133, 219, 0.3);
    white-space: nowrap;
}

/* Contenido del recibo */
.recibo-contenido-principal {
    padding: 2rem;
}

/* Grid de información */
.info-grid-recibo {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.info-seccion-recibo {
    background: #F8FAFC;
    border-radius: 15px;
    padding: 1.5rem;
    border: 1px solid #E5E7EB;
    transition: all 0.3s ease;
}

.info-seccion-recibo:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.info-seccion-recibo h5 {
    color: #1F2937;
    margin-bottom: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    border-bottom: 2px solid #E5E7EB;
    padding-bottom: 0.5rem;
}

.info-seccion-recibo h5 i {
    color: #5F85DB;
}

.info-item-recibo {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.8rem 0;
    border-bottom: 1px solid #E5E7EB;
}

.info-item-recibo:last-child {
    border-bottom: none;
}

.info-label-recibo {
    font-weight: 500;
    color: #6B7280;
    font-size: 0.9rem;
}

.info-value-recibo {
    font-weight: 500;
    color: #1F2937;
    text-align: right;
}

/* Tabla de productos con scroll */
.contenedor-tabla-productos {
    background: white;
    border-radius: 15px;
    border: 1px solid #E5E7EB;
    overflow: hidden;
    margin-bottom: 2rem;
    max-height: 400px;
    overflow-y: auto;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
}

.contenedor-tabla-productos::-webkit-scrollbar {
    width: 8px;
}

.contenedor-tabla-productos::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.contenedor-tabla-productos::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #5F85DB, #90B8F8);
    border-radius: 10px;
}

.contenedor-tabla-productos::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #4a6bb8, #5F85DB);
}

.tabla-productos-detallada {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
}

.tabla-productos-detallada thead {
    background: var(--primary-gradient);
    position: sticky;
    top: 0;
    z-index: 10;
}

.tabla-productos-detallada th {
    padding: 1rem;
    text-align: left;
    font-weight: 600;
    color: white;
    font-size: 0.9rem;
    white-space: nowrap;
}

.tabla-productos-detallada td {
    padding: 1rem;
    border-bottom: 1px solid #E5E7EB;
    vertical-align: top;
}

.tabla-productos-detallada tbody tr:hover {
    background: #F9FAFB;
}

/* Información de variante */
.info-variante {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(124, 58, 237, 0.1));
    padding: 0.5rem 0.75rem;
    border-radius: 8px;
    margin-top: 0.5rem;
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-left: 3px solid #8B5CF6;
}

.info-variante i {
    color: #8B5CF6;
}

.badge-oferta-recibo {
    background: var(--warning-gradient);
    color: white;
    padding: 0.3rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    margin-left: 0.5rem;
    box-shadow: 0 2px 5px rgba(245, 158, 11, 0.3);
}

.precio-original {
    text-decoration: line-through;
    color: #9CA3AF;
    font-size: 0.85rem;
    margin-right: 0.5rem;
}

.precio-oferta {
    color: #10B981;
    font-weight: 600;
    font-size: 1.1rem;
}

/* Sección total */
.seccion-total-recibo {
    background: var(--dark-gradient);
    padding: 2rem;
    border-radius: 15px;
    color: white;
    margin-top: 2rem;
}

.grid-total {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.item-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.item-total:last-child {
    border-bottom: none;
}

.label-total {
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.95rem;
}

.valor-total {
    font-weight: 600;
    font-size: 1.1rem;
}

.total-final-recibo {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1.5rem;
    border-top: 2px solid rgba(255, 255, 255, 0.2);
    font-size: 1.3rem;
    font-weight: 700;
    margin-top: 1rem;
}

.total-final-recibo .label-total {
    font-size: 1.2rem;
}

.total-final-recibo .valor-total {
    font-size: 1.8rem;
    color: #10B981;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* Botones de acción en footer */
.footer-acciones-recibo {
    display: flex;
    gap: 1rem;
    justify-content: center;
    padding: 2rem 0;
    flex-wrap: wrap;
    background: #F8FAFC;
    border-radius: 15px;
    margin-top: 2rem;
}

.btn-imprimir-mejorado {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    background: var(--success-gradient);
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.3s;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
    min-width: 200px;
}

.btn-imprimir-mejorado:hover {
    background: linear-gradient(135deg, #059669, #047857);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
}

.btn-volver-footer {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, #6B7280, #4B5563);
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    text-decoration: none;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
    min-width: 200px;
}

.btn-volver-footer:hover {
    background: linear-gradient(135deg, #4B5563, #374151);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(107, 114, 128, 0.4);
    color: white;
}

/* Responsive */
@media (max-width: 768px) {
    .recibo-cabecera-sticky {
        flex-direction: column;
        text-align: center;
        padding: 1rem;
        gap: 1rem;
    }
    
    .cabecera-izquierda {
        justify-content: center;
    }
    
    .btn-volver-cabecera {
        width: 100%;
        justify-content: center;
    }
    
    .recibo-titulo-principal h1 {
        font-size: 1.3rem;
    }
    
    .info-grid-recibo {
        grid-template-columns: 1fr;
    }
    
    .tabla-productos-detallada {
        font-size: 0.85rem;
    }
    
    .tabla-productos-detallada th,
    .tabla-productos-detallada td {
        padding: 0.75rem 0.5rem;
    }
    
    .footer-acciones-recibo {
        flex-direction: column;
        align-items: center;
    }
    
    .btn-imprimir-mejorado,
    .btn-volver-footer {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 576px) {
    .recibo-contenido-principal {
        padding: 1rem;
    }
    
    .info-seccion-recibo {
        padding: 1rem;
    }
    
    .seccion-total-recibo {
        padding: 1.5rem;
    }
    
    .grid-total {
        grid-template-columns: 1fr;
    }
}

@media print {
    .btn-volver-cabecera,
    .footer-acciones-recibo {
        display: none !important;
    }
    
    .recibo-contenedor-principal {
        box-shadow: none;
        border: 1px solid #ddd;
    }
    
    .recibo-cabecera-sticky {
        position: static;
        background: #f8f9fa;
        color: #333;
    }
    
    .recibo-titulo-principal h1 {
        color: #333;
    }
    
    .recibo-titulo-principal p {
        color: #666;
    }
    
    .recibo-id-badge-grande {
        background: #ddd;
        color: #333;
        box-shadow: none;
    }
}

/* Animaciones adicionales */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.recibo-cabecera-sticky {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-volver-cabecera {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.recibo-id-badge-grande {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.info-seccion-recibo {
    animation: slideIn 0.5s ease forwards;
}

.badge-oferta-recibo {
    transition: all 0.2s ease;
}

.btn-imprimir-mejorado,
.btn-volver-footer {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-3">
    <!-- Contenedor principal del recibo -->
    <div class="recibo-contenedor-principal">
        <!-- Cabecera sticky con botón de volver -->
        <div class="recibo-cabecera-sticky">
            <div class="cabecera-izquierda">
                <a href="{% url 'gestionar_ventas' %}" class="btn-volver-cabecera">
                    <i class="fas fa-arrow-left"></i>
                    Volver a Ventas
                </a>
                <div class="recibo-titulo-principal">
                    <h1><i class="fas fa-receipt me-2"></i>RECIBO DE COMPRA</h1>
                    <p>Vecy Software - Sistema de Gestión</p>
                </div>
            </div>
            
            <div class="cabecera-derecha">
                <div class="recibo-id-badge-grande">
                    #{{ pedido.id }}
                </div>
            </div>
        </div>

        <!-- Contenido del recibo -->
        <div class="recibo-contenido-principal">
            <!-- Grid de información -->
            <div class="info-grid-recibo">
                <!-- Información del Negocio -->
                <div class="info-seccion-recibo">
                    <h5><i class="fas fa-store"></i> Información del Negocio</h5>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Negocio:</span>
                        <span class="info-value-recibo">{{ negocio_activo.nom_neg }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">NIT:</span>
                        <span class="info-value-recibo">{{ negocio_activo.nit_neg }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Dirección:</span>
                        <span class="info-value-recibo">{{ negocio_activo.direcc_neg }}</span>
                    </div>
                </div>

                <!-- Información del Pedido -->
                <div class="info-seccion-recibo">
                    <h5><i class="fas fa-shopping-cart"></i> Información del Pedido</h5>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">ID Pedido:</span>
                        <span class="info-value-recibo">#{{ pedido.id }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Fecha:</span>
                        <span class="info-value-recibo">{{ pedido.fecha }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Estado:</span>
                        <span class="info-value-recibo">
                            <span class="badge-estado-pedido {{ pedido.estado|lower }}">
                                {{ pedido.estado|title }}
                            </span>
                        </span>
                    </div>
                </div>

                <!-- Información del Cliente -->
                <div class="info-seccion-recibo">
                    <h5><i class="fas fa-user"></i> Información del Cliente</h5>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Nombre:</span>
                        <span class="info-value-recibo">{{ pedido.cliente_nombre }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Documento:</span>
                        <span class="info-value-recibo">{{ pedido.cliente_documento }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Email:</span>
                        <span class="info-value-recibo">{{ pedido.cliente_email }}</span>
                    </div>
                </div>

                <!-- Información de Pago -->
                <div class="info-seccion-recibo">
                    <h5><i class="fas fa-credit-card"></i> Información de Pago</h5>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Método:</span>
                        <span class="info-value-recibo">{{ pedido.metodo_pago_texto|default:pedido.metodo_pago }}</span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Estado:</span>
                        <span class="info-value-recibo">
                            <span class="badge-estado-pedido {% if pedido.estado_pago == 'pagado' %}entregado{% else %}pendiente{% endif %}">
                                {{ pedido.estado_pago|title }}
                            </span>
                        </span>
                    </div>
                    <div class="info-item-recibo">
                        <span class="info-label-recibo">Fecha Pago:</span>
                        <span class="info-value-recibo">{{ pedido.fecha_pago }}</span>
                    </div>
                </div>
            </div>

            <!-- Tabla de productos con scroll -->
            <div class="contenedor-tabla-productos">
                <table class="tabla-productos-detallada">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Categoría</th>
                            <th>Cantidad</th>
                            <th>Precio</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for producto in productos %}
                        <tr>
                            <td>
                                <strong>{{ producto.nombre }}</strong>
                                {% if producto.descripcion %}
                                <br><small class="text-muted">{{ producto.descripcion }}</small>
                                {% endif %}
                                
                                <!-- Información de variante si existe -->
                                {% if producto.variante_nombre %}
                                <div class="info-variante">
                                    <i class="fas fa-tag"></i>
                                    <span><strong>Variante:</strong> {{ producto.variante_nombre }}</span>
                                    {% if producto.precio_adicional > 0 %}
                                    <span class="badge bg-purple ms-2">+${{ producto.precio_adicional }}</span>
                                    {% endif %}
                                </div>
                                {% endif %}
                                
                                <!-- Información de oferta si existe -->
                                {% if producto.oferta_activa %}
                                <div class="info-variante">
                                    <i class="fas fa-percentage text-warning"></i>
                                    <span><strong>Oferta:</strong> {{ producto.porcentaje_oferta }}% OFF</span>
                                    {% if producto.titulo_oferta %}
                                    <span class="badge-oferta-recibo">
                                        <i class="fas fa-tag"></i> {{ producto.titulo_oferta }}
                                    </span>
                                    {% endif %}
                                </div>
                                {% endif %}
                            </td>
                            <td>{{ producto.categoria }}</td>
                            <td class="fw-bold">{{ producto.cantidad }}</td>
                            <td>
                                {% if producto.oferta_activa %}
                                <div>
                                    <span class="precio-original">${{ producto.precio_regular }}</span>
                                    <br>
                                    <span class="precio-oferta">${{ producto.precio_unitario }}</span>
                                    <div class="text-success small">-{{ producto.porcentaje_oferta }}%</div>
                                </div>
                                {% else %}
                                <div class="fw-bold">${{ producto.precio_unitario }}</div>
                                {% endif %}
                            </td>
                            <td><strong>${{ producto.subtotal|floatformat:2 }}</strong></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- Sección total -->
            <div class="seccion-total-recibo">
                <div class="grid-total">
                    <div class="item-total">
                        <span class="label-total">Subtotal:</span>
                        <span class="valor-total">${{ pedido.subtotal|floatformat:2 }}</span>
                    </div>
                    
                    {% if pedido.descuento_total > 0 %}
                    <div class="item-total">
                        <span class="label-total">Descuentos:</span>
                        <span class="valor-total text-success">-${{ pedido.descuento_total|floatformat:2 }}</span>
                    </div>
                    {% endif %}
                    
                    <!-- Si hubiera otros cargos -->
                    {% if pedido.envio %}
                    <div class="item-total">
                        <span class="label-total">Envío:</span>
                        <span class="valor-total">${{ pedido.envio|floatformat:2 }}</span>
                    </div>
                    {% endif %}
                    
                    {% if pedido.impuestos %}
                    <div class="item-total">
                        <span class="label-total">Impuestos:</span>
                        <span class="valor-total">${{ pedido.impuestos|floatformat:2 }}</span>
                    </div>
                    {% endif %}
                </div>
                
                <div class="total-final-recibo">
                    <span class="label-total">TOTAL A PAGAR</span>
                    <span class="valor-total">${{ pedido.total|floatformat:2 }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Botones de acción en footer -->
    <div class="footer-acciones-recibo">
        <button onclick="window.print()" class="btn-imprimir-mejorado">
            <i class="fas fa-print"></i> Imprimir Recibo
        </button>
        <a href="{% url 'gestionar_ventas' %}" class="btn-volver-footer">
            <i class="fas fa-arrow-left"></i> Volver a Ventas
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 1. Efecto para la cabecera sticky al hacer scroll
    const cabeceraSticky = document.querySelector('.recibo-cabecera-sticky');
    const btnVolverCabecera = document.querySelector('.btn-volver-cabecera');
    const reciboIDBadge = document.querySelector('.recibo-id-badge-grande');
    
    if (cabeceraSticky) {
        let ultimoScroll = 0;
        
        window.addEventListener('scroll', function() {
            const scrollActual = window.pageYOffset;
            
            // Efecto de desvanecimiento y cambio de sombra
            if (scrollActual > 50) {
                // Cuando se hace scroll hacia abajo
                cabeceraSticky.style.backgroundColor = 'rgba(38, 40, 43, 0.95)';
                cabeceraSticky.style.backdropFilter = 'blur(20px)';
                cabeceraSticky.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.2)';
                cabeceraSticky.style.padding = '1rem 2rem';
                
                // Reducir tamaño del título
                const titulo = cabeceraSticky.querySelector('h1');
                if (titulo) titulo.style.fontSize = '1.3rem';
                
                // Hacer el botón más compacto
                if (btnVolverCabecera) {
                    btnVolverCabecera.style.padding = '0.6rem 1.2rem';
                    btnVolverCabecera.style.fontSize = '0.9rem';
                }
                
                // Reducir badge del ID
                if (reciboIDBadge) {
                    reciboIDBadge.style.padding = '0.4rem 1.2rem';
                    reciboIDBadge.style.fontSize = '1.1rem';
                }
                
                // Efecto de esconder/mostrar según dirección del scroll
                if (scrollActual > ultimoScroll) {
                    // Scroll hacia abajo - hacer más transparente
                    cabeceraSticky.style.opacity = '0.9';
                } else {
                    // Scroll hacia arriba - hacer más visible
                    cabeceraSticky.style.opacity = '1';
                }
            } else {
                // Cuando está en la parte superior
                cabeceraSticky.style.backgroundColor = '';
                cabeceraSticky.style.backdropFilter = '';
                cabeceraSticky.style.boxShadow = '';
                cabeceraSticky.style.padding = '';
                cabeceraSticky.style.opacity = '1';
                
                // Restaurar tamaño del título
                const titulo = cabeceraSticky.querySelector('h1');
                if (titulo) titulo.style.fontSize = '';
                
                // Restaurar botón
                if (btnVolverCabecera) {
                    btnVolverCabecera.style.padding = '';
                    btnVolverCabecera.style.fontSize = '';
                }
                
                // Restaurar badge
                if (reciboIDBadge) {
                    reciboIDBadge.style.padding = '';
                    reciboIDBadge.style.fontSize = '';
                }
            }
            
            ultimoScroll = scrollActual;
        });
        
        // 2. Efecto hover mejorado para el botón de volver
        if (btnVolverCabecera) {
            btnVolverCabecera.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px) scale(1.05)';
                this.style.boxShadow = '0 8px 25px rgba(139, 92, 246, 0.4)';
                this.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
            });
            
            btnVolverCabecera.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
                this.style.boxShadow = '0 4px 15px rgba(139, 92, 246, 0.3)';
            });
        }
        
        // 3. Efecto de pulso para el badge del ID
        if (reciboIDBadge) {
            // Pulso inicial cuando se carga la página
            setTimeout(() => {
                reciboIDBadge.style.transform = 'scale(1.1)';
                reciboIDBadge.style.transition = 'transform 0.3s ease';
                
                setTimeout(() => {
                    reciboIDBadge.style.transform = 'scale(1)';
                }, 300);
            }, 500);
            
            // Efecto hover
            reciboIDBadge.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.1) rotate(-2deg)';
                this.style.boxShadow = '0 6px 20px rgba(95, 133, 219, 0.4)';
            });
            
            reciboIDBadge.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1) rotate(0)';
                this.style.boxShadow = '0 4px 15px rgba(95, 133, 219, 0.3)';
            });
        }
    }
    
    // 4. Efecto para la tabla con scroll
    const tablaContenedor = document.querySelector('.contenedor-tabla-productos');
    if (tablaContenedor) {
        // Agregar sombra al hacer scroll
        tablaContenedor.addEventListener('scroll', function() {
            if (this.scrollTop > 0) {
                this.style.boxShadow = 'inset 0 4px 12px rgba(0,0,0,0.1), 0 2px 8px rgba(0,0,0,0.1)';
            } else {
                this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.08)';
            }
        });
        
        // Resaltar fila al pasar el mouse
        const filas = tablaContenedor.querySelectorAll('tbody tr');
        filas.forEach(fila => {
            fila.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#F0F9FF';
                this.style.transition = 'background-color 0.2s ease';
            });
            
            fila.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '';
            });
        });
    }
    
    // 5. Animación para los badges de oferta
    const badgesOferta = document.querySelectorAll('.badge-oferta-recibo');
    badgesOferta.forEach(badge => {
        badge.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.15) rotate(2deg)';
            this.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';
        });
        
        badge.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1) rotate(0)';
            this.style.boxShadow = '0 2px 5px rgba(245, 158, 11, 0.3)';
        });
    });
    
    // 6. Efecto para las secciones de información
    const seccionesInfo = document.querySelectorAll('.info-seccion-recibo');
    seccionesInfo.forEach(seccion => {
        seccion.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px)';
            this.style.boxShadow = '0 12px 30px rgba(0, 0, 0, 0.15)';
        });
        
        seccion.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.1)';
        });
    });
    
    // 7. Configurar botón de impresión con efectos
    const btnImprimir = document.querySelector('.btn-imprimir-mejorado');
    if (btnImprimir) {
        // Efecto hover
        btnImprimir.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 8px 25px rgba(16, 185, 129, 0.4)';
        });
        
        btnImprimir.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.3)';
        });
        
        // Efecto al hacer clic
        btnImprimir.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Agregar efectos visuales antes de imprimir
            const textoOriginal = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i> Preparando impresión...';
            this.disabled = true;
            this.style.opacity = '0.8';
            this.style.transform = 'scale(0.98)';
            
            // Agregar efecto de carga en toda la página
            const loader = document.createElement('div');
            loader.style.position = 'fixed';
            loader.style.top = '0';
            loader.style.left = '0';
            loader.style.width = '100%';
            loader.style.height = '100%';
            loader.style.backgroundColor = 'rgba(0,0,0,0.7)';
            loader.style.zIndex = '9999';
            loader.style.display = 'flex';
            loader.style.justifyContent = 'center';
            loader.style.alignItems = 'center';
            loader.style.flexDirection = 'column';
            loader.style.color = 'white';
            loader.innerHTML = `
                <i class="fas fa-print fa-3x mb-3"></i>
                <h4 class="mb-2">Preparando recibo para imprimir</h4>
                <p class="mb-0">Por favor espere...</p>
            `;
            document.body.appendChild(loader);
            
            setTimeout(() => {
                // Eliminar loader
                document.body.removeChild(loader);
                
                // Imprimir
                window.print();
                
                // Restaurar botón
                setTimeout(() => {
                    this.innerHTML = textoOriginal;
                    this.disabled = false;
                    this.style.opacity = '1';
                    this.style.transform = 'scale(1)';
                    
                    // Mostrar notificación de éxito
                    const notificacion = document.createElement('div');
                    notificacion.style.position = 'fixed';
                    notificacion.style.bottom = '20px';
                    notificacion.style.right = '20px';
                    notificacion.style.backgroundColor = '#10B981';
                    notificacion.style.color = 'white';
                    notificacion.style.padding = '1rem 1.5rem';
                    notificacion.style.borderRadius = '10px';
                    notificacion.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.3)';
                    notificacion.style.zIndex = '9999';
                    notificacion.innerHTML = `
                        <i class="fas fa-check-circle me-2"></i>
                        <strong>¡Recibo listo para imprimir!</strong>
                    `;
                    document.body.appendChild(notificacion);
                    
                    // Eliminar notificación después de 3 segundos
                    setTimeout(() => {
                        document.body.removeChild(notificacion);
                    }, 3000);
                }, 500);
            }, 1500);
        });
    }
    
    // 8. Efecto para el botón volver del footer
    const btnVolverFooter = document.querySelector('.btn-volver-footer');
    if (btnVolverFooter) {
        btnVolverFooter.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 8px 25px rgba(107, 114, 128, 0.4)';
        });
        
        btnVolverFooter.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(107, 114, 128, 0.3)';
        });
    }
    
    // 9. Scroll suave para la tabla
    if (tablaContenedor && tablaContenedor.scrollHeight > tablaContenedor.clientHeight) {
        // Agregar indicador de scroll
        const indicadorScroll = document.createElement('div');
        indicadorScroll.style.position = 'absolute';
        indicadorScroll.style.bottom = '10px';
        indicadorScroll.style.right = '10px';
        indicadorScroll.style.backgroundColor = 'rgba(95, 133, 219, 0.8)';
        indicadorScroll.style.color = 'white';
        indicadorScroll.style.padding = '0.3rem 0.6rem';
        indicadorScroll.style.borderRadius = '15px';
        indicadorScroll.style.fontSize = '0.8rem';
        indicadorScroll.style.zIndex = '10';
        indicadorScroll.innerHTML = '<i class="fas fa-chevron-down me-1"></i> Desplázate';
        tablaContenedor.style.position = 'relative';
        tablaContenedor.appendChild(indicadorScroll);
        
        // Ocultar indicador cuando se hace scroll
        tablaContenedor.addEventListener('scroll', function() {
            if (this.scrollTop > 50) {
                indicadorScroll.style.opacity = '0';
                indicadorScroll.style.transition = 'opacity 0.3s ease';
            } else {
                indicadorScroll.style.opacity = '1';
            }
        });
    }
    
    // 10. Efecto de carga inicial
    window.addEventListener('load', function() {
        // Agregar clase de carga completada
        document.body.classList.add('recibo-cargado');
        
        // Animación de entrada para las secciones
        const secciones = document.querySelectorAll('.info-seccion-recibo, .contenedor-tabla-productos, .seccion-total-recibo');
        secciones.forEach((seccion, index) => {
            seccion.style.opacity = '0';
            seccion.style.transform = 'translateY(20px)';
            seccion.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            
            setTimeout(() => {
                seccion.style.opacity = '1';
                seccion.style.transform = 'translateY(0)';
            }, 100 + (index * 100));
        });
    });
});
</script>
{% endblock %}
